/*
Educational Online Test Delivery System Copyright (c) 2013 American Institutes for Research

Distributed under the AIR Open Source License, Version 1.0 See accompanying file AIR-License-1_0.txt or at
http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 */

package org.opentestsystem.shared.progman.service.impl;

import java.util.List;
import java.util.Map;

import org.opentestsystem.shared.progman.domain.Tenant;
import org.opentestsystem.shared.progman.domain.TenantChain;
import org.opentestsystem.shared.progman.domain.TenantType;
import org.opentestsystem.shared.progman.service.TenantChainService;
import org.opentestsystem.shared.progman.service.TenantService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.util.CollectionUtils;

@Service
public class TenantChainServiceImpl implements TenantChainService {

    @Autowired
    private transient TenantService tenantService;

    @Override
    public TenantChain findTenantChain(final Map<TenantType, String> inTypeAndValues) {

        final TenantChain tenantChain = new TenantChain();
        tenantChain.addAllSearchInput(inTypeAndValues);

        final List<Tenant> tenants = this.tenantService.findyByNameAndType(inTypeAndValues);
        if (!CollectionUtils.isEmpty(tenants)) {
            for (final Tenant tenant : tenants) {
                tenantChain.addTenantToChain(tenant);
            }
        }

        return tenantChain;
    }

}
