/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.shared.progman.domain;

import java.io.Serializable;

import javax.validation.constraints.NotNull;

import org.hibernate.validator.constraints.NotBlank;
import org.springframework.data.mongodb.core.mapping.Document;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;

/**
 * Describes Asset.
 * Asset items may include a string value for a property or a file asset.
 */
@Document
@JsonIgnoreProperties(ignoreUnknown = true)
public class Asset implements Serializable {

    private static final long serialVersionUID = -2756682752327395487L;

    private static final String GET_ASSET_URL = "/assetFile/";

    @NotBlank(message = "asset.name.required")
    private String name;

    @NotNull(message = "asset.type.required")
    private AssetType type;

    private String property;

    private String assetFileGridId;

    private String assetFileName;

    private String fileContentType;

    private String basePath;

    public String getName() {
        return name;
    }

    public void setName(final String inName) {
        this.name = inName;
    }

    public String getAssetFileGridId() {
        return assetFileGridId;
    }

    public void setAssetFileGridId(final String inAssetFileGridId) {
        this.assetFileGridId = inAssetFileGridId;
    }

    public AssetType getType() {
        return type;
    }

    public void setType(final AssetType inType) {
        type = inType;
    }

    public String getProperty() {
        return property;
    }

    public void setProperty(final String inProperty) {
        this.property = inProperty;
    }

    public String getAssetFileName() {
        return assetFileName;
    }

    public void setAssetFileName(final String inAssetFileName) {
        this.assetFileName = inAssetFileName;
    }

    public String calculatePropertyValueForFile() {
        return GET_ASSET_URL + getAssetFileGridId() + "/" + getAssetFileName();
    }

    public enum AssetType {
        PROPERTY,
        IMAGE,
        FILE;
    }

    /**
     * @return the fileContentType
     */
    public String getFileContentType() {
        return fileContentType;
    }

    /**
     * @param inFileContentType the inFileContentType to set
     */
    public void setFileContentType(final String inFileContentType) {
        this.fileContentType = inFileContentType;
    }

    /**
     * @return the basePath
     */
    public String getBasePath() {
        return basePath;
    }

    /**
     * @param inBasePath the basePath to set
     */
    public void setBasePath(final String inBasePath) {
        this.basePath = inBasePath;
    }

    @JsonProperty
    public String getUrl() {
        return basePath + property;
    }
}
